<!DOCTYPE html>
<html>
<head>
    <title>Submission Successful</title>
    <link rel="stylesheet" href="formstyle.css">
</head>
<body>
    <div class="success-container">
        <h1>Submitted Successfully!</h1>
        <p>Your startup details have been saved to our database.</p>
        
        <h2>All Submitted Startups</h2>
        <table id="startupsTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Domain</th>
                    <th>Founded Year</th>
                    <th>Employees</th>
                    <th>Current Revenue</th>
                    <th>Past Revenue</th>
                    <th>Cash in Bank</th>
                    <th>Monthly Expenses</th>
                    <th>Funding Raised</th>
                    <th>Churn Rate</th>
                    <th>Tech Stack</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be inserted here by JavaScript -->
            </tbody>
        </table>
        
        <a href="/form">Submit another startup</a>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                const response = await fetch('/startups');
                const startups = await response.json();
                
                const tableBody = document.querySelector('#startupsTable tbody');
                
                startups.forEach(startup => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${startup.name}</td>
                        <td>${startup.domain}</td>
                        <td>${startup.founded_year}</td>
                        <td>${startup.employee_count}</td>
                        <td>$${startup.current_revenue}</td>
                        <td>$${startup.past_revenue}</td>
                        <td>$${startup.cash_in_bank}</td>
                        <td>$${startup.monthly_expenses}</td>
                        <td>$${startup.funding_raised}</td>
                        <td>${startup.churn_rate}%</td>
                        <td>${startup.tech_stack}</td>
                    `;
                    tableBody.appendChild(row);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        });
    </script>
</body>
</html>
